<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Website</title>
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/events.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lobster&display=swap">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="/events.js" defer></script>
    <script src="/App.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // delete event
            const deleteEventButton = document.getElementById('deleteEventButton');
            if (deleteEventButton) {
                deleteEventButton.addEventListener('click', function () {
                    const eventID = window.location.pathname.split('/')[4];
                    deleteEvent(eventID);
                });
            }
            // update event
            const updateEventButton = document.getElementById('updateEventButton');
            if (updateEventButton) {
                updateEventButton.addEventListener('click', function () {
                    const eventID = window.location.pathname.split('/')[4];
                    const eventData = {
                        title: document.getElementById('title').value,
                        description: document.getElementById('description').value,
                        date: document.getElementById('date').value,
                        startTime: document.getElementById('startTime').value,
                        endTime: document.getElementById('endTime').value,
                        isPublic: document.getElementById('public').checked,
                        details: Array.from(document.getElementsByClassName('create-event-details')).map(input => input.value),
                        image_url: document.getElementById('image_url').value
                    };
                    updateEvent(eventID, eventData);
                });
            }
        });

    </script>
</head>

<body id="app">
    <header class="top-pane">
        <nav>
            <ul class="nav-horizontal">
                <li v-for="item in navitems"> <a :key="item.title" :href="item.url"
                        :class="['nav-link', item.alignClass]"> {{ item.title }} </a> </li>
            </ul>
        </nav>
    </header>

    <div class="page-content content">
        <h1>Edit Event</h1>
        <h4>Branch: {{ eventInfo.branch }}</h4>
        <h4>Title: <input id="title" class="create-event-title" type="text" v-model="eventInfo.event_name"></h4>
        <h4>Set Event Time</h4>
        <p>Date: <input id="date" type="date" class="create-event-time-inputs" v-model="eventInfo.start_date"></p>
        <p>Start time: <input id="startTime" type="time" class="create-event-time-inputs"
                v-model="eventInfo.start_time"></p>
        <p>End time: <input id="endTime" type="time" class="create-event-time-inputs" v-model="eventInfo.end_time">
        </p>
        <h4>Set Event to Public or Private</h4>
        <input id="public" type="radio" name="event_privacy" value="1" v-model="eventInfo.is_public">
        <label for="public"> Public </label>
        <input id="private" type="radio" name="event_privacy" value="0" v-model="eventInfo.is_public">
        <label for="private"> Private </label>
        <h4>Enter Event Description Below</h4>
        <textarea id="description" class="create-event-description" v-model="eventInfo.event_description"></textarea>
        <p>Note: Event description should be brief, further details can go in the details section below</p>
        <h4>Enter Event Details Below</h4>
        <div class="details-container">
            <template v-for="(point, index) in eventInfo.event_details" :key="index">
                <div>
                    <p v-if="point.level === 0" style="display: inline-block"> - </p>
                    <p v-else style="display: inline-block"> â€ƒ- </p>
                    <input type="text" class="create-event-details" v-model="point.text">
                </div>
            </template>
        </div>
        <h4>Add an Image</h4>
        <input id="image_url" class="create-event-image-upload" type="file" name="event-image" accept="image/*">
        <div v-if="eventInfo.event_image">
            <img :src="eventInfo.event_image" alt="Event Image">
        </div>
        <button id="updateEventButton" class="button primary-button create-event-button" type="button">
            Update Event
        </button>
        <button class="button secondary-button create-event-button" type="button" id="deleteEventButton">Delete
            event</button>
    </div>

    <footer>
        &copy; 2024 Meal Mates. All rights reserved.
        <a class="private_policy" href="/private_policy"> Private Policy</a>
    </footer>
</body>

</html>